"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[490],{5962:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var r=s(7895),l=s(579);const a=()=>(0,l.jsx)("div",{className:" inset-0 z-50 fixed flex justify-center items-center backdrop-blur",children:(0,l.jsx)(r.su,{visible:!0,height:"100",width:"100",color:"#F97316",ariaLabel:"line-wave-loading",wrapperStyle:{},wrapperClass:"",firstLineColor:"",middleLineColor:"",lastLineColor:""})})},1360:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var r=s(5043),l=s(3002),a=s(6720),n=s(9804),i=s(3003),d=s(4851),o=s(579);const c=()=>{const e=(0,i.wA)(),t=(0,i.d4)(d.L1),s=(0,i.d4)(d.a_);(0,r.useEffect)((()=>{e((0,d.AU)())}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:" text-slate-500 font-light col-start-1 col-end-2\r border-r border-slate-300 overflow-auto h-[calc(100vh-70px)]",children:(0,o.jsx)("div",{className:"px-2",children:(0,o.jsxs)("ul",{className:"text-center  text-md md:text-md",children:[0===t.length&&(0,o.jsx)("p",{className:" text-slate-500 text-center font-medium text-md",children:"No Item Group Found..."}),t.map((t=>{if(0===t.inactive)return(0,o.jsxs)("li",{className:s===t.id?"pb-4 my-2 flex flex-col justify-center items-center rounded-md py-2 bg-orange-500 text-white cursor-pointer":"pb-4 my-2 flex flex-col justify-center items-center rounded-md  py-2 hover:bg-orange-500 hover:text-white cursor-pointer",onClick:()=>{return s=t.id,void e(d.XI.selected({catid:s}));var s},children:["food"===t.Category.toLowerCase()?(0,o.jsx)(l.ZnP,{className:"text-2xl"}):"coffee"===t.Category.toLowerCase()?(0,o.jsx)(a.zqG,{className:"text-2xl"}):(0,o.jsx)(n.bgN,{className:"text-2xl"}),(0,o.jsx)("span",{}),t.Category]},t.id)}))]})})})})};var x=s(5051);s.p;var m=s(1353),h=s(9428),u=s(184);const p=r.createContext();var j=s(5969);const f=e=>{const t=(0,r.useContext)(p),s=(0,i.wA)();(0,r.useEffect)((()=>(e.item.length>0&&t.dispatch({type:"setPrice",price:e.item[0].price,name:e.item[0].item,id:e.item[0].id,urlpath:e.item[0].urlpath}),()=>{t.dispatch({type:"cleanup"})})),[e.item]);return e.isopen?(0,o.jsx)("div",{className:"inset-0 z-50  outline-none fixed overflow-x-hidden overflow-y-hidden flex justify-center items-center backdrop-blur-sm",children:(0,o.jsx)("div",{className:" relative w-2/6  mx-auto my-6 shadow-lg text-center bg-white rounded-lg",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:" border-b border-slate-300  flex justify-between items-center px-3 py-4",children:[(0,o.jsx)("h4",{className:" text-lg font-bold",children:"Add Order"}),(0,o.jsx)(u.yyx,{onClick:e.onClose,className:" cursor-pointer"})]}),e.item.map(((e,s)=>(0,o.jsxs)("div",{className:" grid grid-cols-3 mx-3 my-4 px-2 py-2 rounded-md bg-slate-200",children:[(0,o.jsx)("div",{className:"",children:(0,o.jsx)("img",{src:"http://localhost:5000/"+e.urlpath,alt:e.item,className:" rounded-md",style:{width:"157px",height:"104px"}})}),(0,o.jsxs)("div",{className:" flex flex-col justify-around  text-start px-2",children:[(0,o.jsx)("h4",{className:" text-md font-bold",children:e.item}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:" text-slate-400 font-thin",children:"price"}),(0,o.jsx)("h6",{className:" text-orange-500 font-bold text-lg",children:e.price})]})]}),(0,o.jsxs)("div",{className:" flex items-center justify-around",children:[(0,o.jsx)("div",{className:" bg-white p-2 rounded-full cursor-pointer",onClick:t.decrementHandler,children:(0,o.jsx)(u.iu5,{})}),(0,o.jsx)("span",{className:"!select-none",children:t.priceDetails.quantity}),(0,o.jsx)("div",{className:" bg-white p-2 rounded-full cursor-pointer",onClick:t.incrementHandler,children:(0,o.jsx)(u.OiG,{})})]})]},s))),(0,o.jsx)("div",{className:" mx-3 my-4 px-2 py-2",children:(0,o.jsx)("textarea",{className:" w-full rounded-md px-2 py-2 text-sm  font-mono font-light\r focus:outline-none  border  border-gray-400 focus:border-orange-500 !select-none",rows:5,placeholder:"Add Note",onChange:e=>t.dispatch({type:"notes",notes:e.target.value})})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 mx-3 my-4 px-2 py-2",children:[(0,o.jsxs)("div",{className:" text-start",children:[(0,o.jsx)("span",{className:"!select-none inline-block text-slate-500",children:"Total"}),(0,o.jsxs)("p",{className:" font-extrabold text-md font-mono",children:["$",t.priceDetails.totalamount]})]}),(0,o.jsx)("button",{className:" bg-orange-300 py-2 rounded-3xl text-white text-md font-semibold hover:bg-orange-500",onClick:()=>{s(j.o1.addedToOrder({priceDetails:t.priceDetails})),e.onClose()},children:"Add Order"})]})]})})}):null};var g=s(3216),b=s(423),N=s(1110),v=s(3768),y=s(5962);const w=()=>{const e=(0,i.d4)(j.dJ),[t,s]=(0,r.useState)(""),{status:l,code:a}=(0,i.d4)(N.Uw),n=(0,i.d4)(j.b9),d=(0,g.Zp)(),c=(0,i.wA)();let x=0;(0,r.useEffect)((()=>(201===a?v.oR.success(l):500!==a&&404!==a||v.oR.error(l),()=>c((0,N.tP)()))),[l,a]);return(0,o.jsxs)(o.Fragment,{children:["loading"===l&&(0,o.jsx)(y.A,{}),(0,o.jsx)(v.l$,{}),(0,o.jsxs)("div",{className:"col-start-10 col-end-13 px-3 pt-3  text-start flex flex-col gap-2 overflow-auto h-[calc(100vh-70px)]",children:[(0,o.jsxs)("div",{className:" flex-grow h-[75%]",children:[(0,o.jsx)("p",{className:" text-xl font-bold font-mono",children:"Customer Information"}),(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsxs)("div",{className:" flex flex-col  py-2 border-b border-slate-300",children:[(0,o.jsx)("div",{className:" grid px-4",children:(0,o.jsx)("button",{className:"rounded-2xl py-2 px-2 bg-orange-300 text-white hover:bg-orange-500 transition ease-in-out delay-75",onClick:()=>{d("../home/Table")},children:(0,o.jsxs)("div",{className:" inline-flex items-center gap-5",children:[n?(0,o.jsx)("span",{children:"Table Selected"}):(0,o.jsx)("span",{children:"Select Table"}),(0,o.jsx)("span",{children:(0,o.jsx)(b.OQo,{})})]})})}),(0,o.jsx)("div",{className:"my-3 px-4",children:(0,o.jsx)("input",{type:"text",className:"w-full focus:outline-none px-10 py-2 md:px-16 border rounded-2xl border-gray-400 focus:border-orange-500\r ",maxLength:30,placeholder:"Customer Name",value:t,onChange:e=>s(e.target.value)})})]}),(0,o.jsxs)("div",{className:"py-2 h-2/3 overflow-y-auto",children:[(0,o.jsx)("h5",{className:" text-xl font-mono font-bold",children:"Orders Details"}),e.addedOrder.map(((e,t)=>(x+=e.totalamount,(0,o.jsxs)("div",{className:" grid grid-cols-2 px-4 py-2 border-b border-slate-300",children:[(0,o.jsx)("div",{className:"p-3",children:(0,o.jsx)("img",{src:"http://localhost:5000/"+e.urlpath,alt:e.item,className:" rounded-md"})}),(0,o.jsxs)("div",{className:" flex flex-col   text-start p-3",children:[(0,o.jsx)("h4",{className:" text-md font-bold",children:e.item}),(0,o.jsxs)("p",{className:" text-slate-400 font-thin",children:["Quantity :"," ",(0,o.jsx)("span",{className:" text-orange-500 font-bold text-md",children:e.quantity})]}),(0,o.jsxs)("p",{className:" text-slate-400 font-thin",children:["price / qty :"," ",(0,o.jsx)("span",{className:" text-orange-500 font-bold text-md",children:e.price})]})]})]},t))))]})]})]}),(0,o.jsx)("div",{className:" flex-grow h-[25%] ",children:(0,o.jsxs)("div",{className:"flex flex-col justify-between gap-3",children:[(0,o.jsxs)("div",{className:" grid grid-cols-1 ",children:[(0,o.jsxs)("div",{className:"flex justify-between  text-slate-400 font-thin",children:[(0,o.jsx)("div",{children:"Subtotal"}),(0,o.jsx)("div",{className:" font-semibold",children:x})]}),(0,o.jsxs)("div",{className:"flex justify-between border-b-2 border-dotted border-slate-300  text-slate-400 font-thin",children:[(0,o.jsx)("div",{children:"Tax"}),(0,o.jsx)("div",{className:" font-semibold",children:"0.00"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("div",{className:" text-slate-400 font-thin",children:"Total Amount"}),(0,o.jsx)("div",{className:" text-orange-500 font-semibold",children:x})]})]}),(0,o.jsx)("div",{className:" grid px-4 ",children:(0,o.jsx)("button",{onClick:async()=>{const r=t.trim();return n?""===r||r.length<5?v.oR.error("Invalid Customer name"):0===e.addedOrder.length?v.oR.error("Choose Item"):(await c((0,N.fS)({obj:e,proccessedName:r})),await c(j.o1.cleanup()),void s("")):v.oR.error("choose a table")},className:"rounded-2xl py-2 px-2 bg-orange-300 text-white hover:bg-orange-500 transition ease-in-out delay-75",children:"Place Order"})})]})})]})]})},C=()=>{const e=(0,i.d4)(h.ld),t=(0,i.d4)(d.L1),s=(0,i.wA)();let l=(0,i.d4)(m.z7);const[a,n]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[p,j]=(0,r.useState)(!1),[g,b]=(0,r.useState)([]),[N,v]=(0,r.useState)(""),[y,C]=(0,r.useState)(""),[k,q]=(0,r.useState)(),S=(0,r.useDeferredValue)(y),A=(0,i.d4)(d.a_);(0,r.useEffect)((()=>{s((0,m.GX)()),s((0,h.mf)());const t=e.filter((e=>0===e.inactive));n(t),u(l)}),[]),(0,r.useMemo)((()=>{if(k){const t=e.filter((e=>e.gpid===k&&0===e.inactive));n(t)}}),[k]),(0,r.useMemo)((()=>{if(S){const t=e.filter((e=>e.item.trim().toLowerCase().includes(S.toLowerCase()&&0===e.inactive)));n(t)}}),[S]),(0,r.useEffect)((()=>{const s=t.find((e=>e.id===A));s&&v(s.Category);const r=l.filter((e=>e.CategoryId===A&&0===e.inactive));u(r);const a=r.map((e=>e.id)),i=e.filter((e=>a.includes(e.gpid)));n(i)}),[A]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{isopen:p,item:g,onClose:()=>{j(!1)}}),(0,o.jsxs)("div",{className:"col-start-2 col-end-10 border-r border-slate-300",children:[(0,o.jsxs)("h6",{className:" px-2  py-text-slate-00 text-sm border-b border-slate-300",children:["Home ",(0,o.jsxs)("span",{className:" text-orange-500",children:["/ ",N]})]}),(0,o.jsxs)("div",{className:" py-2 border-b  border-slate-300 text-lg grid grid-cols-2 gap-2",children:[(0,o.jsxs)("div",{className:"px-3 group inline-flex items-center gap-1 border-r-2 border-slate-300",children:[(0,o.jsx)(x.Xj1,{}),(0,o.jsx)("input",{type:"text",className:" outline-none pl-2",placeholder:"search menu..",onChange:e=>C(e.target.value)})]}),(0,o.jsx)("div",{className:" pr-3",children:(0,o.jsxs)("ul",{className:"flex justify-evenly items-center flex-wrap",children:[0===c.length&&(0,o.jsx)("p",{className:" text-slate-500 text-center font-medium text-md",children:"No Item Group Found..."}),c.map((e=>0===e.inactive?(0,o.jsx)("li",{className:k===e.id?"text-base border border-slate-300 rounded-xl px-2 bg-orange-500 ytext-white cursor-pointer text-white":"text-base border border-slate-300 rounded-xl px-2 hover:bg-orange-500 hover:text-white cursor-pointer",onClick:()=>q(e.id),children:e.Group},e.id):null))]})})]}),(0,o.jsx)("div",{className:" p-3 overflow-auto h-[calc(100vh-140px)] bg-slate-100",children:(0,o.jsxs)("div",{className:"mt-1 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[0===a.length&&(0,o.jsx)("p",{className:" text-slate-500 text-center font-medium text-xl",children:"No Items Found..."}),a.map((e=>(0,o.jsxs)("div",{className:" bg-white p-4 rounded-lg shadow-lg cursor-pointer",onClick:()=>(e=>{b((t=>[e])),j(!0)})(e),children:[(0,o.jsx)("img",{src:"http://localhost:5000/"+e.urlpath||0,alt:e.item,className:"block rounded-lg",style:{width:"210px",height:"140px"}}),(0,o.jsx)("p",{className:"text-center text-md font-bold",children:e.item}),(0,o.jsxs)("span",{className:" block text-center text-md font-bold text-orange-500",children:["$ ",e.price]})]},e.id)))]})})]}),(0,o.jsx)(w,{})]})},k={item:"",id:null,urlpath:"",quantity:1,price:0,totalamount:0,notes:""},q=(e,t)=>{switch(t.type){case"increment":return{...e,quantity:Number(e.quantity)+1,totalamount:e.price*(e.quantity+1)};case"decrement":let s=e.quantity-1>0?Number(e.quantity)-1:e.quantity;return{...e,quantity:s,totalamount:Number(e.price)*s};case"notes":return{...e,notes:t.notes};case"setPrice":return{...e,price:t.price,totalamount:t.price*e.quantity,item:t.name,id:t.id,urlpath:t.urlpath};case"cleanup":return{item:"",id:null,urlpath:"",quantity:1,price:0,totalamount:0,notes:""};default:return e}},S=e=>{let{children:t}=e;const[s,l]=(0,r.useState)([]),[a,n]=(0,r.useReducer)(q,k);return(0,o.jsx)(p.Provider,{value:{clear:()=>{l([])},addedOrder:s,addedToOrder:()=>{l((e=>[...e,a]))},incrementHandler:()=>{n({type:"increment"})},decrementHandler:()=>{n({type:"decrement"})},priceDetails:a,dispatch:n},children:t})},A=()=>(0,o.jsx)("div",{className:"  grid grid-cols-12 overflow-auto",children:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(S,{children:[(0,o.jsx)(c,{}),(0,o.jsx)(C,{})]})})})}}]);
//# sourceMappingURL=490.169aa685.chunk.js.map